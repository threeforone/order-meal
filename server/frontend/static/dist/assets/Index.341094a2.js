import{z as M,i as O,r as _,A as L,k as r,o as P,c as j,e as t,l as o,a as g,u as z,y as I,b as p,w as J,s as R,B as w,E as l}from"./index.0d91fd13.js";import{u as m}from"./user.806902e7.js";import{C as q}from"./Company.ee2cccd2.js";import"./http.b92c0875.js";const X={__name:"Index",setup(G){M(),O(()=>{i()});const h=_({id:0,username:"\u674E\u534E",admin:0,superAdmin:0,departmentId:0,companyId:0}),y=window.localStorage.getItem("user");if(y!=null){const e=JSON.parse(y);h.value=e}let C=_([]),b=_(0);const a=L({page:1,pageSize:10,status:"",admin:"",username:"",companyId:"",departmentId:""}),v=(e,n)=>{a.companyId=e,a.departmentId=n},i=async()=>{const e=await m.getUserList(a);C.value=e.data.data.data,b.value=e.data.data.total},k=e=>e===2?"\u79BB\u804C":e===1?"\u5DF2\u5BA1\u6838":e===0?"\u5F85\u5BA1\u6838":e.toString(),B=e=>e===1?"\u7BA1\u7406\u5458":e===0?"\u5426":e.toString(),V=e=>{a.size=e,i()},U=e=>{a.current=e,i()},x=()=>{a.current=1,i()},A=e=>{w.prompt("\u786E\u5B9A\u8981\u91CD\u7F6E\u8BE5\u7528\u6237\u5BC6\u7801?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async({value:n})=>{(await m.resetUserPassword({id:e,password:n})).data.code?(l.success("\u91CD\u7F6E\u6210\u529F"),i()):l.error("\u91CD\u7F6E\u5931\u8D25")}).catch(()=>{l({type:"info",message:"\u53D6\u6D88\u91CD\u7F6E"})})},S=(e,n)=>{w.confirm("\u786E\u5B9A\u53D8\u66F4\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await m.updateUserStatus({id:e,status:n})).data.code?(l.success("\u6210\u529F"),i()):l.error("\u5931\u8D25")}).catch(()=>{l({type:"info",message:"\u5931\u8D25"})})},D=e=>{w.confirm("\u786E\u5B9A\u53D8\u66F4\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let n=e.admin==0?1:0;(await m.updateUserAdmin({id:e.ID,admin:n})).data.code?(l.success("\u6210\u529F"),i()):l.error("\u5931\u8D25")}).catch(()=>{l({type:"info",message:"\u5931\u8D25"})})};return(e,n)=>{const c=r("el-option"),T=r("el-select"),u=r("el-button"),E=r("el-input"),d=r("el-table-column"),N=r("el-table"),$=r("el-pagination"),F=r("el-card");return P(),j("div",null,[t(F,null,{default:o(()=>[g("div",null,[t(q,{ifInline:!0,style:{float:"left"},onSelectedOptions:v}),t(T,{modelValue:a.status,"onUpdate:modelValue":n[0]||(n[0]=s=>a.status=s),placeholder:"\u72B6\u6001",style:{float:"left"}},{default:o(()=>[t(c,{label:"\u5F85\u5BA1\u6838",value:"0"}),t(c,{label:"\u5DF2\u5BA1\u6838",value:"1"}),t(c,{label:"\u79BB\u804C",value:"2"})]),_:1},8,["modelValue"]),t(E,{style:{width:"280px",float:"left"},onClear:x,clearable:"",modelValue:a.username,"onUpdate:modelValue":n[1]||(n[1]=s=>a.username=s),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",class:"input-with-select"},{append:o(()=>[t(u,{icon:"Search",onClick:x})]),_:1},8,["modelValue"])]),t(N,{data:z(C),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[t(d,{prop:"username",label:"\u7528\u6237\u540D",width:"180"}),t(d,{prop:"company.name",label:"\u516C\u53F8",width:"180"}),t(d,{prop:"department.name",label:"\u90E8\u95E8",width:"180"}),t(d,{prop:"admin",label:"\u7BA1\u7406\u5458",width:"180"},{default:o(({row:s})=>[g("span",null,I(B(s.admin)),1)]),_:1}),t(d,{prop:"status",label:"\u72B6\u6001",width:"180"},{default:o(({row:s})=>[g("span",null,I(k(s.status)),1)]),_:1}),t(d,{label:"\u64CD\u4F5C",width:"330"},{default:o(s=>[t(u,{type:"danger",size:"small",onClick:f=>A(s.row.ID)},{default:o(()=>[p("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["onClick"]),t(u,{type:"warning",size:"small",onClick:f=>S(s.row.ID,1)},{default:o(()=>[p("\u901A\u8FC7")]),_:2},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>S(s.row.ID,2)},{default:o(()=>[p("\u79BB\u804C")]),_:2},1032,["onClick"]),J(t(u,{type:"danger",size:"small",onClick:f=>D(s.row)},{default:o(()=>[p("\u7BA1\u7406\u53D8\u66F4")]),_:2},1032,["onClick"]),[[R,h.value.superAdmin==1]])]),_:1})]),_:1},8,["data"]),t($,{style:{"margin-top":"20px"},"current-page":a.current,"page-size":a.size,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:z(b),onSizeChange:V,onCurrentChange:U},null,8,["current-page","page-size","total"])]),_:1})])}}};export{X as default};
