import{o as k}from"./order.c7cc57c7.js";import{_ as x,z as M,i as T,r as p,A as I,k as s,o as Y,c as $,e as a,l as g,a as d,u as f}from"./index.0d91fd13.js";import{C as N}from"./Company.ee2cccd2.js";import"./http.b92c0875.js";const V={class:"demo-date-picker"},B={class:"block",style:{float:"left"}},F={__name:"Statistics",setup(O){M(),T(()=>{i()});let m=p([]),u=p(0);const r=p(""),e=I({page:1,pageSize:10,companyId:"",departmentId:"",startTime:"",endTime:""}),_=t=>{const o=new Date(t),n=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${n}-${c}-${l}`},h=()=>{if(e.current=1,r.value){var t=r.value;e.startTime=_(t[0]),e.endTime=_(t[1])}else e.startTime="",e.endTime="";i()},S=(t,o)=>{e.companyId=t,e.departmentId=o},i=async()=>{const t=await k.getMealStatistics(e);m.value=t.data.data.data,u.value=t.data.data.total},v=t=>{e.current=t,i()},y=t=>{e.size=t,getMealDay()},b=(t,o)=>{const n=new Date(t.statisticsDate);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}`};return(t,o)=>{const n=s("el-date-picker"),c=s("el-button"),l=s("el-table-column"),D=s("el-table"),C=s("el-pagination"),z=s("el-card");return Y(),$("div",null,[a(z,null,{default:g(()=>[d("div",null,[a(N,{ifInline:!0,style:{float:"left"},onSelectedOptions:S}),d("div",V,[d("div",B,[a(n,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=w=>r.value=w),type:"daterange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])])]),d("div",null,[a(c,{icon:"Search",onClick:h})])]),a(D,{data:f(m),border:"",style:{width:"100%","margin-top":"20px"}},{default:g(()=>[a(l,{prop:"companyName",label:"\u516C\u53F8",width:"180"}),a(l,{prop:"departmentName",label:"\u90E8\u95E8",width:"180"}),a(l,{prop:"statisticsDate",label:"\u65E5\u671F",width:"180",formatter:b}),a(l,{prop:"count",label:"\u6B21\u6570",width:"180"})]),_:1},8,["data"]),a(C,{style:{"margin-top":"20px"},"current-page":e.current,"page-size":e.size,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:f(u),onSizeChange:y,onCurrentChange:v},null,8,["current-page","page-size","total"])]),_:1})])}}},U=x(F,[["__scopeId","data-v-44e86158"]]);export{U as default};
